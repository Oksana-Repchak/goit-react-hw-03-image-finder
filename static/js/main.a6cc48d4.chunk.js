(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{18:function(e,t,r){},41:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),c=r.n(a),s=r(10),o=r.n(s),i=(r(18),r(9)),u=r(3),h=r(4),l=r(6),b=r(5),p=r(11),g=r.n(p),j=r(8),f=r.n(j),m=r(12),d="https://pixabay.com/api",y="18966103-245a37f9e820c36a1856c1db9";function O(){return(O=Object(m.a)(f.a.mark((function e(t){var r,n,a,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.searchImage,n=t.currentPage,a="?q=".concat(r,"&page=").concat(n,"&key=").concat(y,"&image_type=photo&orientation=horizontal&per_page=12"),e.prev=2,e.next=5,fetch("".concat(d,"/").concat(a));case 5:return c=e.sent,e.next=8,c.json();case 8:return s=e.sent,console.log(c),console.log(s.hits),e.abrupt("return",s.hits);case 14:return e.prev=14,e.t0=e.catch(2),e.abrupt("return",e.t0("Some error in fetch"));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}var v={fetchImages:function(e){return O.apply(this,arguments)}},x=function(e){Object(l.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={query:""},e.handleChange=function(t){e.setState({query:t.currentTarget.value}),console.log(t.currentTarget.value)},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.query),console.log(e.state.query),e.setState({query:""})},e}return Object(h.a)(r,[{key:"render",value:function(){return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",value:this.state.query,onChange:this.handleChange,placeholder:"Search images and photos"})]})})}}]),r}(a.Component),S=function(e){var t=e.hits;return Object(n.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,r=e.webformatURL,a=e.title;return Object(n.jsx)("li",{children:Object(n.jsx)("img",{src:r,alt:a})},t)}))})},w=function(e){Object(l.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={searchQuery:"",hits:[],currentPage:1,isLoading:!1,error:null},e.onChangeQuery=function(t){e.setState({searchQuery:t,currentPage:1,hits:[],error:null})},e.fetchArticles=function(){var t=e.state,r=t.currentPage,n={searchQuery:t.searchQuery,currentPage:r};e.setState({isLoading:!0}),v.fetchImages(n).then((function(t){e.setState((function(e){return{hits:[].concat(Object(i.a)(e.hits),Object(i.a)(t)),currentPage:e.currentPage+1}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){return e.setState({isLoading:!1})}))},e}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.fetchArticles()}},{key:"render",value:function(){var e=this.state,t=e.hits,r=e.isLoading,a=e.error,c=t.length>0&&!r;return Object(n.jsxs)(n.Fragment,{children:[a&&Object(n.jsxs)("p",{children:["Whoops, something went wrong: ",a.message]}),Object(n.jsx)(x,{onSubmit:this.onChangeQuery}),t.length>0&&Object(n.jsx)(S,{hits:t}),r&&Object(n.jsx)(g.a,{type:"Hearts",color:"#00BFFF",height:100,width:100,timeout:3e3}),c&&Object(n.jsx)("button",{type:"button",onClick:this.fetchArticles,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451"})]})}}]),r}(a.Component);o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(w,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a6cc48d4.chunk.js.map